####################################################
# Price Change Events 1356
#
# written by Johan Andersson & Henrik Lohmander
#
# modified from vanilla events by Count Flandy
####################################################

namespace = 1356prices

# Explosion of Early Modern Printing
country_event = {
	id = 1356prices.1
	title = 1356prices.1.t
	desc = 1356prices.1.d
	picture = TRADEGOODS_eventPicture
	fire_only_once = yes
	major = yes

	trigger = {
		has_institution = mercantilism_institution
		dip = 4
		dip_tech = 3
	}
	
	mean_time_to_happen = {
		months = 1
	}
		
	option = {
		name = 1356prices.1.a
		ai_chance = {
			factor = 100
		}
		add_innovativeness_small_effect = yes
		change_price = {
			trade_goods = paper
			key = INCREASED_PAPER_DEMAND
			value = 1
			duration = -1
		}
		random_owned_province = {
			limit = {
				trade_goods = paper
				is_state = yes
				development = 10
			}
			change_trade_goods = paper
		}
	}
}

#Make event that spawns paper in various provinces

country_event = {
	id = 1356prices.2
	title = 1356prices.2.t
	desc = 1356prices.2.d
	picture = TRADEGOODS_eventPicture
	fire_only_once = yes
	major = yes

	trigger = {
		NOT = { has_global_flag = hollender_beater_flag }
		has_institution = manufactories
		any_owned_province = {
			province_without_special_goods_produced_trigger = yes
			is_state = yes
			OR = { #Somewhere reasonable for windmills 
				has_building = workshop
				has_building = counting_house
				base_production = 6
				has_port = yes
			}
			OR = {
				trade_goods = cloth #Lump
				trade_goods = naval_supplies #Hemp
				trade_goods = wool #Lump
			}
			NOT = { has_building = textile }
			NOT = { has_building = wharf }
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					province_without_special_goods_produced_trigger = yes
					is_state = yes
					OR = { #Somewhere reasonable for windmills 
						has_building = workshop
						has_building = counting_house
						base_production = 6
						has_port = yes
					}
					OR = {
						trade_goods = cloth #Lump
						trade_goods = naval_supplies #Hemp
						trade_goods = wool #Lump
					}
					NOT = { has_building = textile }
					NOT = { has_building = wharf }
				}
				save_event_target_as = hollender_beater_province
			}
			random_owned_province = {
				limit = {
					province_without_special_goods_produced_trigger = yes
					is_state = yes
					num_free_building_slots = 1 #prefered but not required
					OR = { #Somewhere reasonable for windmills 
						has_building = workshop
						has_building = counting_house
						base_production = 6
						has_port = yes
					}
					OR = {
						trade_goods = cloth #Lump
						trade_goods = naval_supplies #Hemp
						trade_goods = wool #Lump
					}
					NOT = { has_building = textile }
					NOT = { has_building = wharf }
				}
				save_event_target_as = hollender_beater_province
			}
			random_owned_province = {
				limit = {
					province_without_special_goods_produced_trigger = yes
					is_state = yes
					num_free_building_slots = 1
					OR = { #Somewhere reasonable for windmills 
						has_building = workshop
						has_building = counting_house
						base_production = 6
						has_port = yes
					}
					OR = {
						trade_goods = cloth #Lump
						trade_goods = naval_supplies #Hemp
						trade_goods = wool #Lump
					}
					NOT = { has_building = textile }
					NOT = { has_building = wharf }
					base_production = 6
				}
				save_event_target_as = hollender_beater_province
			}
			random_owned_province = {
				limit = {
					province_without_special_goods_produced_trigger = yes
					is_state = yes
					num_free_building_slots = 1
					OR = { #Somewhere reasonable for windmills 
						has_building = workshop
						has_building = counting_house
						base_production = 6
						has_port = yes
					}
					OR = {
						trade_goods = cloth #Lump
						trade_goods = naval_supplies #Hemp
						trade_goods = wool #Lump
					}
					NOT = { has_building = textile }
					NOT = { has_building = wharf }
					base_production = 10
				}
				save_event_target_as = hollender_beater_province
			}
			random_owned_province = {
				limit = {
					province_without_special_goods_produced_trigger = yes
					is_state = yes
					num_free_building_slots = 1
					OR = { #Somewhere reasonable for windmills 
						has_building = workshop
						has_building = counting_house
						base_production = 6
						has_port = yes
					}
					OR = {
						trade_goods = cloth #Lump
						trade_goods = naval_supplies #Hemp
						trade_goods = wool #Lump
					}
					NOT = { has_building = textile }
					NOT = { has_building = wharf }
					base_production = 14
				}
				save_event_target_as = hollender_beater_province
			}
		}
	}
	
	option = {
		name = 1356prices.2.a
		add_adm_power = 75
		event_target:hollender_beater_province = {
			change_trade_goods = paper
			if = {
				limit = { num_free_building_slots = 1 }
				add_building = mills
				else = {
					add_base_production = 4
				}
			}
		}
		change_price = {
			trade_goods = paper
			key = HOLLENDER_BEATER
			value = -0.5
			duration = -1
		}
	}
}

# Growing Bureaucracies
country_event = {
	id = 1356prices.3
	title = 1356prices.3.t
	desc = 1356prices.3.d
	picture = BIG_BOOK_eventPicture

	fire_only_once = yes
	
	major = yes

	trigger = {
		NOT = { has_global_flag = paper_in_bureaucracies }
		adm_tech = 10 #1356 #Orignally 6
		has_institution = feudalism
		OR = {
			num_of_cities = 50
			colony = 1 #1 Colonial Country
		}
		NOT = { government = tribal }
		OR = {
			colony = 1 #1 Colonial Country
			AND = {
				capital_scope = { continent = europe }
				any_owned_province = { NOT = { continent = europe } }
			}
			AND = {
				capital_scope = { continent = africa }
				any_owned_province = { NOT = { continent = africa } }
			}
			AND = {
				capital_scope = { continent = asia }
				any_owned_province = { NOT = { continent = asia } }
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = 1356prices.3.a
		change_price = {
			trade_goods = paper
			key = PAPER_IN_BUREAUCRACY
			value = 0.25
			duration = -1
		}
	}
}
