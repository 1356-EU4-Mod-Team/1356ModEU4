#
# remember to add graphics for relevant ones when you add to this
#
# if a modifier is scaled, its multiplied with development in the province.


# any_friendly_coast_border_province is a special scope made for institution spread.
# It checks for adjacent provinces or provinces one seazone away.
# Friendly is defined as at positive relations or owned by the same country that owns the province.

#1356 NOTE:
#Note: If you're adding institutions/modifying them having an institution start in a nations capital FORCES the nation to start with it. 
#Unsure if preventable.

#######################################
# Feudalism.  
# 
# Most in the old world start with it.
#######################################

feudalism = { #Heavily #Edited by 1356

	penalty = 0.5
	bonus = {
		free_leader_pool = 1
	}
	
	trade_company_efficiency = 0.0


	history = { #1356 #Everything in Feudal History is 100% new and none of it should be vanilla save for the RNW stuff
		is_year = 1000
		OR = {
			AND = { #If this is changed costs for Nation Designer may also need to be changed.
				OR = {
					continent = new_world
					continent = north_america
					continent = south_america
					continent = oceania
				}
				owner = {
					is_playing_custom_nation = yes
					OR = {
						technology_group = western
						technology_group = eastern
						technology_group = ottoman
						technology_group = muslim
						technology_group = indian
						technology_group = chinese
						#technology_group = high_american #Is listed below as High Americans get it regardless of if Nation Designer is used.
					}
				}
			}
			OR = {
				region = british_isles_region
				region = iberia_region
				region = france_region
				region = italy_region
				region = south_german_region
				region = poland_region
				region = ruthenia_region
				region = north_german_region
				region = korea_region
				region = balkan_region
				region = coromandel_region #May need to be adjusted when India update is added
			}
			#Every region below needs a more accurate date when it becomes Feudal.
			AND = { #Scandanavia and Baltic
				OR = {
					region = scandinavia_region
					region = baltic_region
				}
				NOT = { owner = { government = tribal } }
				NOT = { religion = finnish_pagan_reformed } #Province Religion
				NOT = { religion = baltic_pagan_reformed } #Province Religion
				OR = {
					AND = {
						NOT = { province_id = 4114 } #Jokkmokk
						NOT = { province_id = 18 } #Lappland
						NOT = { province_id = 4152 } #Kainuu
						NOT = { province_id = 4113 } #Rovaniemi
						NOT = { area = laponia_area }
					}
					is_year = 1400 #Get a more accurate date
				}
			}
			AND = { #Egypt
				region = egypt_region
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						NOT = { area = lower_nubia_area }
						NOT = { area = al_wahat_area }
						NOT = { area = cyrenaica_area }
						NOT = { province_id = 365 } #Sinai
						NOT = { province_id = 1231 } #Aswan
					}
					is_year = 1500 #Get a more accurate date
				
				}
			}
			AND = { #North Africa #Theoritically this could be a problem, if uncolonized land can have an institution.
				region = maghreb_region #(Should Mzab start with Feudalism?)
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						NOT = { area = fezzan_area }
						NOT = { area = macaronesia_area }
						NOT = { area = north_saharan_area }
						NOT = { province_id = 350 } #Laghouat
						NOT = { province_id = 351 } #Biskra
					}
					is_year = 1500 #Get a more accurate date
				}
			}
			AND = { #Carpathia
				region = carpathia_region
				NOT = { owner = { government = tribal } }
				NOT = { province_id = 4125 } #Szolnok
			}
			AND = { #Low Countries
				region = low_countries_region
				NOT = { owner = { government = tribal } }
				NOT = { province_id = 1931 } #East Frisia
			}
			AND = { #Russia
				region = russia_region
				NOT = { owner = { government = tribal } }
				NOT = { area = tambov_area } 
			}
			AND = { #Caucasia
				region = caucasia_region
				OR = {
					is_year = 1450 #Get a more accurate date
					NOT = { area = circassia_area }
				}
			}
			AND = { #Anatolia & Mashriq
				OR = {
					region = anatolia_region
					region = mashriq_region
				}
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						#We want these tags to not have Feudalism, but it to tick faster since their culture already has it.
						NOT = { owner = { tag = ERE } } #Does this work?
						NOT = { owner = { tag = AKK } } #Does this work?
						NOT = { owner = { tag = QAR } } #Does this work?
						#We want JLR to not have it, but a lot of their land to have it.
						NOT = { owner = { tag = JLR} } #Does this work?
					}
					is_year = 1400 #Get a more accurate date
				}
			}
			AND = { #Arabia & Mashriq
				OR = {
					region = arabia_region
					region = mashriq_region
				}
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						NOT = { culture = bedouin_arabic }
						NOT = { owner = { tag = JLR } }
					}
					is_year = 1650 #Get a more accurate date
				}
				#Did I miss anyone?
			}
			AND = { #Persia and Khorasan
				OR = {
					region = persia_region
					region = khorasan_region
				}
				OR = {
					NOT = { owner = { government = tribal } }
					is_year = 1370 #Get a more accurate date
				}
				#Did I miss anyone?
			}
			AND = { #Pontic Steppe
				region = crimea_region
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						NOT = { area = lower_don_area }
						NOT = { area = astrakhan_area }
						NOT = { area = zaporizhia_area }
						NOT = { area = yedisan_area }
						NOT = { area = azov_area }
						NOT = { province_id = 284 } #Crimea
						NOT = { province_id = 2447 } #Matrega
					}
					is_year = 1600 #Get a more accurate date
				}
			}
			AND = { #Urals #Theoritically this could be a problem, if uncolonized land can have an institution.
				region = ural_region
				NOT = { owner = { government = tribal } }
				OR = {
					AND = {
						NOT = { province_id = 4129 } #Ust-Vym
						NOT = { province_id = 1964 } #Ust-Sysolsk
						NOT = { province_id = 1963 } #Cherdyn
						NOT = { province_id = 1077 } #Solikamsk
						NOT = { area = samara_area }
						NOT = { area = bashkiria_area }
						NOT = { area = ural_area }
						NOT = { area = kazan_area }
						NOT = { area = saratov_area }
						NOT = { area = kama_area }
						NOT = { area = volga_area }
					}
					AND = {
						owner = { primary_culture = uralic }
						owner = { primary_culture = novgorodian }
						owner = { primary_culture = russian }
						is_year = 1400 #Get a more accurate date
					}
					is_year = 1600 #Get a more accurate date
				}
			}
			AND = { #Central Asia 
				region = central_asia_region
				OR = {
					AND = {
						NOT = { owner = { government = tribal } }
						NOT = { culture = uyghur }
					}
					NOT = { is_year = 1600 } #Get a more accurate date
				}
			}
			AND = { #Mongolia #Theoritically this could be a problem, if uncolonized land can have an institution.
				region = mongolia_region
				NOT = { owner = { government = tribal } }
				NOT = { is_year = 1600 } #Get a more accurate date
			}
			AND = { #Manchuria #Theoritically this could be a problem, if uncolonized land can have an institution.
				region = manchuria_region
				NOT = { owner = { government = tribal } }
				NOT = { is_year = 1430 } #Get a more accurate date
			}
			AND = { #Both Siberias #Theoritically this could be a problem, if uncolonized land can have an institution.
				OR = {
					region = east_siberia_region
					region = west_siberia_region
				}
				OR = {
					AND = {
						NOT = { area = buryatia_area }
						NOT = { province_id = 2103 } #Udi
						NOT = { owner = { government = tribal } }
					}
					NOT = { is_year = 1600 } #Get a more accurate date
				}
			}
			AND = { #Sub Saharan Africa AKA:Kongo, Central Africa, East Africa, South Africa, Niger, Sahel, Guinea #Theoritically this could be a problem, if uncolonized land can have an institution.
				OR = {
					region = horn_of_africa_region
					region = east_africa_region
					region = central_africa_region
					region = kongo_region
					region = south_africa_region
					region = sahel_region
					region = guinea_region
					region = niger_region
				}
				NOT = { owner = { government = tribal } }
				NOT = { religion = shamanism } #This is the province religion
			}
			AND = { #Burma, Xinan, and Indochina
				OR = {
					region = burma_region
					region = indo_china_region
					region = xinan_region
				}
				NOT = { owner = { government = tribal } }
				NOT = { religion = animism }
			}
			AND = { #Tibet
				region = tibet_region
				NOT = { owner = { government = tribal } }
			}
			AND = { #North and South China
				OR = {
					region = north_china_region
					region = south_china_region
				}
				OR = {
					AND = {
						NOT = { owner = { government = tribal } }
						NOT = { religion = animism }
						NOT = { religion = tengri_pagan_reformed }
						NOT = { culture = mongol }
						NOT = { culture = oirats }						
					}
					is_year = 1600 #Check to make sure this year is correct
				}
			}
			AND = { #Hinduistan
				region = hindusthan_region
				OR = {
					NOT = { owner = { government = tribal } }
					NOT = { culture = jharkhandi }
				}
			}
			AND = { #Bengal
				region = bengal_region
				OR = {
					AND = {
						NOT = { culture = jharkhandi }
						NOT = { culture = garjati }
						NOT = { culture = gondi }
						NOT = { culture = chin }
						NOT = { province_id = 2040 } #Sadiya
					}
					NOT = { owner = { government = tribal } }
				}

			}
			AND = { #Western India
				region = west_india_region
				OR = {
					NOT = { culture = saurashtri } #Make an exception for Saurashtri? Look further into
					NOT = { owner = { government = tribal } }
				}
			}
			AND = { #Deccan
				region = deccan_region
				OR = {
					NOT = { culture = gondi }
					NOT = { owner = { government = tribal } }
				}
			}
			#AND = { #Coromandel
				#region = coromandel_region
				#NOT = { owner = { government = tribal } }
			#}
			AND = { #Japan
				region = japan_region
				OR = {
					NOT = { area = hokkaido_area } #Ainu
					NOT = { owner = { government = tribal } }
				}
			}
			AND = { #Malaya, Moluccas, Indonesia, 
				OR = {
					region = indonesia_region
					region = moluccas_region
					region = malaya_region
				}
				NOT = { owner = { government = tribal } }
				NOT = { religion = animism }
			}
			AND = { #North American Natives, Caribbean Natives, Australia,Oceania, and South American Natives (Not Incan) #Theoritically this could be a problem, if uncolonized land can have an institution.
				#In the future ensure specific North American Tribes recieve Feudalism when they historically did
				OR = {
					region = canada_region
					region = great_lakes_region
					region = northeast_america_region
					region = southeast_america_region
					region = mississippi_region
					region = great_plains_region
					region = california_region
					region = cascadia_region
					region = hudson_bay_region
					region = rio_grande_region
					region = colombia_region
					region = la_plata_region
					region = brazil_region
					region = carribeans_region
					region = australia_region
					region = oceanea_region
				}
				OR = {
					OR = {
						NOT = { owner = { government = tribal } }
						NOT = { owner = { government = government = native } }
					}
					AND = {
						NOT = { religion = totemism } #This is the province religion
						NOT = { religion = animism } #This is the province religion
						NOT = { religion = inti } #This is the province religion
						NOT = { religion = norse_pagan_reformed }
						NOT = { province_id = 858 } #Tamaulipas
						NOT = { area = upper_acadia_area }
						NOT = { area = lower_acadia_area }
						NOT = { area = newfoundland_area }
						NOT = { area = labrador_area }
						NOT = { area = cote_nord_area }
						NOT = { area = greenland_area }
						NOT = { area = notre_dame_mountains_area }
					}
				}
			}
			AND = { #Mexico, Central America
				OR = {
					region = central_america_region
					region = mexico_region
				}
				NOT = { religion = animism }
				NOT = { religion = nahuatl }
				NOT = { religion = mesoamerican_religion }
				NOT = { religion = totemism }
			}
			AND = { # Upper Peru, Peru
				OR = {
					region = upper_peru_region
					region = peru_region
				}
				NOT = { owner = { government = tribal } }
				NOT = { religion = animism }
				is_year = 1650 #Get a more accurate year, as these should be the only natives to have Feudalism aside from a few Eastern American Tribes
			}
			owner = { technology_group = high_american }
			is_year = 1700
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = institution_events.1

	can_embrace = {
		owner = { NOT = { government = tribal } }
		#always = yes
	}

	embracement_speed = { #Add a modifier for "Reformed" Religions
		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = {
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						feudalism = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_nobles }
			}
			custom_trigger_tooltip = {
				tooltip = FEUDALISM_AND_NOBLES
				any_neighbor_province = {
					feudalism = 100
				}
				owner = {
					has_estate = estate_nobles
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
				has_estate = estate_nobles
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = PORT_OR_CAPITAL_IN_COLONY_FEUDAL
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = feudalism }
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				owner = { is_colonial_nation = no }
			}
			custom_trigger_tooltip = {
				tooltip = CAPITAL_IN_OLD_WORLD_FEUDAL
			
				is_capital = yes
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = feudalism
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_feudalism_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = feudalism
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Mercantilism.  
# 
# Starts in Lubeck & Various Trade Centers around the world
#######################################

#Self note; May be easier to base this off of Regions/Local cultures instead.

mercantilism_institution = { #1356 New Content

	penalty = 0.5
	bonus = {
		trade_range_modifier = 0.1
		global_trade_goods_size_modifier = 0.1
	}
	
	trade_company_efficiency = 0.0

	historical_start_date = 1350.1.1
	historical_start_province = 45 # Lubeck

	history = {
		#is_year = 1350
		OR = {
			AND = { #Nation Designer
				OR = {
					continent = new_world
					continent = north_america
					continent = south_america
					continent = oceania
				}
				owner = {
					is_playing_custom_nation = yes
					OR = {
						technology_group = western
						technology_group = eastern
						technology_group = ottoman
						technology_group = muslim
						technology_group = indian
						technology_group = chinese
						#technology_group = high_american #Is listed below as High Americans get it regardless of if Nation Designer is used.
					}
				}
			}
			owner = { technology_group = high_american }
			AND = { #Low Countries, Chinese, Korean, Japanese, Greek, Germanic, Danish, Swedish, Scanian, English, USA, French
				owner = { is_playing_custom_nation = no }
				is_year = 1350
				OR = { #Note, having an institution spawn in a nations capital forces ALL their provinces to have it.(????)
					province_id = 151 #Constantinople
					province_id = 112 #Venice
					province_id = 101 #Genoa
					province_id = 44 #Hamburg
					province_id = 54 #Stade
					#province_id = 4383 #Den Haag
					province_id = 2996 #Wismar
					#province_id = 12 #Sjaelland
					province_id = 6 #Lund
					province_id = 14 #Fyn
					province_id = 45 #Lubeck
					province_id = 1874 #Bremen
					province_id = 55 #Oldenburg
					province_id = 25 #Gotland
					province_id = 186 #Champagne
					province_id = 267 #Plzen #Czech Province
					province_id = 238 #Essex
					province_id = 235 #Kent
					province_id = 1860 #Norfolk
					province_id = 118 #Rome
					province_id = 220 #Valencia
					province_id = 213 #Barcelona
					province_id = 231 #Porto
					province_id = 2983 #Salerno
					province_id = 137 #Ragusa
					province_id = 149 #Adrianople
					province_id = 362 #Rosetta
					province_id = 2312 #Wasit
					province_id = 2313 #Antioch
					province_id = 453 #Qarshi
					#province_id = 446 #Herat
					province_id = 445 #Merv
					province_id = 399 #Qawasim
					province_id = 4457 #Khambhat
					province_id = 524 #Central Delhi
					province_id = 2075 #Doaba
					province_id = 597 #Johor
					province_id = 286 #Azov
					province_id = 1774 #Treviso
					province_id = 1862 #Cremona
					province_id = 115 #Pisa
					province_id = 251 #Aberdeen
					province_id = 97 #Amsterdam
					province_id = 87 #Calais
					#province_id = 90 #Vladderen
					province_id = 1744 #Antwerpen
					province_id = 695 #Hejian
					province_id = 2745 #Gyeongju
					province_id = 1020 #Kyoto
					province_id = 2149 #Ningbo
					province_id = 685 #Yangzhou
					province_id = 667 #Canton
					province_id = 700 #Xi'an
					province_id = 682 #Wuchang
					province_id = 680 #Chongqing
					province_id = 34 #Ingermanland
					province_id = 43 #Danzig
				}
			}
			AND = {
				owner = { is_playing_custom_nation = no }
				is_year = 1360
				OR = {
					owner = { culture_group = germanic }
					owner = { culture_group = low_lands_culture_group }
					owner = { culture_group = korean_g }
					owner = { culture_group = japanese_g }
					owner = { 
						culture_group = east_asian
						NOT = { tag = YUA }
					}
				}
			}
			AND = { #Aramaic, Armenian, Georgian, Pontic, Gothic, Cappadocian, Norwegian, Scottish, Northumbrian, French (Group), Latin, West Slavic
				owner = { is_playing_custom_nation = no }
				is_year = 1365
				OR = {
					culture_group = french
					culture_group = latin
					culture_group = west_slavic
					culture_group = southeastasian_group
					culture_group = burman
					culture_group = eastern_aryan
					culture_group = british
					culture_group = scandinavian
					culture_group = byzantine
					AND = {
						culture_group = east_asian
						NOT = { tag = YUA }
					}
					AND = {
						culture = aramaic
						primary_culture = aramaic
					}
					AND = {
						culture = armenian
						primary_culture = armenian
					}
					AND = {
						culture = georgian
						primary_culture = georgian
					}
				}
			}
			AND = { #Egyptian, Old Egyptian, Syrian, Gaelic, Iberian, Moorish, Novgorodian
				owner = { is_playing_custom_nation = no }
				is_year = 1365
				OR = {
					culture_group = gaelic
					culture_group = iberian 
					culture_group = carpathian
					culture_group = malay
					AND = {
						culture = al_misr_arabic
						primary_culture = al_misr_arabic 
					}
					AND = {
						culture = old_egyptian_mod
						primary_culture = old_egyptian_mod 
					}
					AND = {
						culture = al_suryah_arabic
						primary_culture = al_suryah_arabic 
					}
					AND = {
						culture = moorish
						primary_culture = moorish
					}
					AND = {
						culture = novgorodian
						primary_culture = novgorodian
					}
				}
			}
			AND = { #Turkish
				is_year = 1370
				owner = { is_playing_custom_nation = no }
				OR = {
					culture_group = south_slavic
					culture_group = baltic
					AND = {
						culture = turkish
						primary_culture = turkish 
						NOT = { tag = ERE } 
						NOT = { tag = QON } 
					}
				}
			}
			AND = { #Persian, Azerbaijani, Kurdish, Luri, Mazandarani, Iraqi, Assyrian, Circassian, Dagestani, Icelandic, Maghreb, East Slavic
				owner = { is_playing_custom_nation = no }
				is_year = 1375
				OR = {
					culture_group = maghrebi
					culture_group = east_slavic
					AND = {
						culture = persian
						primary_culture = persian 
						NOT = { tag = MUZ } 
						NOT = { tag = INT } 
					}
					AND = {
						culture = mazandarani
						primary_culture = mazandarani 
					}
					AND = {
						culture = luri
						primary_culture = luri 
					}
					AND = { 
						culture = azerbaijani
						primary_culture = azerbaijani 
						NOT = { tag = CHB } 
					}
					AND = { 
						culture = kurdish
						primary_culture = kurdish 
						NOT = { tag = JLR } 
					}
					AND = {
						culture = al_iraqiya_arabic
						primary_culture = al_iraqiya_arabic 
						NOT = { tag = JLR } 
					}
					AND = {
						culture = circassian
						primary_culture = circassian
					}
					AND = {
						culture = dagestani
						primary_culture = dagestani
					}
					AND = {
						culture = assyrian
						primary_culture = assyrian
					}
					AND = {
						culture = icelandic
						primary_culture = icelandic
					}
				}
			}
			AND = { #Baluchi, Afghan, Khorasani,
				owner = { is_playing_custom_nation = no }
				is_year = 1380
				OR = {
					AND = {
						culture = khorasani
						primary_culture = khorasani #1356
						NOT = { tag = KRT } #1356
						NOT = { tag = MIH } #1356
						NOT = { tag = SAB } #1356
						NOT = { tag = TRS } #1356
					}
					AND = {
						culture = afghani
						primary_culture = afghani #1356
						NOT = { tag = KRT } #1356
						NOT = { tag = MIH } #1356
						NOT = { tag = SAB } #1356
						NOT = { tag = TRS } #1356
					}
					AND = {
						culture = baluchi
						primary_culture = baluchi #1356
						NOT = { tag = KRT } #1356
						NOT = { tag = MIH } #1356
						NOT = { tag = SAB } #1356
						NOT = { tag = TRS } #1356
					}
				}
			}
			AND = { #Hindusthani, Dravidian, West Aryan
				is_year = 1380
				owner = {
					OR = {
						culture_group = hindusthani
						culture_group = western_aryan
						culture_group = dravidian
					}
				}
				NOT = { owner = { has_reform = tribal_kingdom } } #Ladakh
			}
			AND = { #Arabic
				is_year = 1380
				owner = { 
					is_playing_custom_nation = no
					culture_group = turko_semitic
				}
				NOT = { area = libyan_desert_area }
				NOT = { area = cyrenaica_area }
			}
			AND = { #Finnic
				is_year = 1385
				owner = { 
					is_playing_custom_nation = no
					culture_group = finnish_urgric_culture_group
				}
			}
			AND = { #Finno-Urgric, Sami,Central Indian
				is_year = 1390
				owner = {
					is_playing_custom_nation = no
					OR = {
						culture_group = finno_ugric
						culture_group = central_indic
						primary_culture = sapmi
					}
				}
			}
			AND = { # Manchu, Tatar, Altaic, Mongolic, East African
				owner = { is_playing_custom_nation = no }
				is_year = 1400
				owner = {
					OR = {
						culture_group = tartar
						culture_group = mongolic_culture_group
						culture_group = altaic
						technology_group = east_african
						technology_group = chinese
						technology_group = nomad_group
						technology_group = indian
						technology_group = muslim
						technology_group = ottoman
						technology_group = eastern
						technology_group = western
						AND = {
							culture = manchu
							primary_culture = manchu
						}
					}
				}
			}
			AND = {
				is_year = 1650
				owner = {
					NOT = { has_reform = siberian_tribe }
					NOT = { has_reform = steppe_horde }
				}
			}
			is_year = 1760
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = institution_events.1

	can_embrace = {
		owner = { has_institution = feudalism }
	}

	embracement_speed = {
		modifier = { #Works
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED_MERCANTILISM
				any_friendly_coast_border_province = {
					mercantilism_institution = 100
				}
			}
		}
		modifier = { #Works
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						mercantilism_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_MERCANTILISM 
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					mercantilism_institution = 100
				}
			}
		}
		modifier = { #Works
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_burghers }
			}
			custom_trigger_tooltip = {
				tooltip = MERCHANTILISM_AND_BURGHERS
				any_neighbor_province = {
					mercantilism_institution = 100
				}
				owner = {
					has_estate = estate_burghers
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
				has_estate = estate_burghers
			}
		}
		modifier = { #Works
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = PORT_OR_CAPITAL_IN_COLONY_MERCHANTILISM 
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = mercantilism_institution }
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			custom_trigger_tooltip = {
				tooltip = is_in_trade_league_mercantilism_tt
				owner = { is_in_trade_league = yes }
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			custom_trigger_tooltip = {
				tooltip = trade_league_leader_mercantilism_tt
				owner = { is_trade_league_leader = yes }

			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			custom_trigger_tooltip = {
				tooltip = mercantilism_trade_goods_tt
				OR = {
					trade_goods = chinaware
					trade_goods = tea
					trade_goods = spices
					trade_goods = coffee
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = cocoa
					trade_goods = silk
					trade_goods = dyes
					trade_goods = incense
					trade_goods = glass
					trade_goods = gems
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			#force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
			}
			custom_trigger_tooltip = {
				tooltip = development_merchantilism_10_tt
				development = 10
				OR = {
					continent = europe
					continent = asia
				}
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			#force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
			}
			custom_trigger_tooltip = {
				tooltip = development_merchantilism_20_tt
				development = 20
				OR = {
					continent = europe
					continent = asia
				}
			}
		}
		modifier = {
			factor = 0.30
			scale = yes
			#force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
			}
			custom_trigger_tooltip = {
				tooltip = development_merchantilism_30_tt
				development = 30
				OR = {
					continent = europe
					continent = asia
				}
			}
		}
		modifier = { #Works
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = mercantilism_institution
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_mercantilisim_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = mercantilism_institution
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Renaissance
# 
# Flows from italy
#######################################

renaissance = { #1356
	penalty = 0.5

	bonus = {
		development_cost = -0.05
		build_cost = -0.05
	}

	trade_company_efficiency = 0.0


	historical_start_date = 1450.1.1
	historical_start_province = 116 # Florence

	history = {
		OR = {
			AND = {
				is_year = 1450
				region = italy_region
			}
			
			AND = {
				is_year = 1450
				continent = europe
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1600
				continent = asia
				owner = {
					NOT = { government = tribal }
				}
			}
			is_year = 1780
		}
	}
	
	can_start = {
		is_year = 1450
		OR = {
			AND = {
				region = italy_region
				NOT = { province_id = 126 }
			}
			AND = {
				region = balkan_region
				owner = { primary_culture = greek }
				owner = { num_of_cities = 25 }
				NOT = { exists = TUR }
				NOT = { exists = RUM }
				
			}
			AND = {
				region = iberia_region
				OR = {
					owner = { primary_culture = andalucian }
					owner = { primary_culture = moorish }
				}
				OR = {
					owner = { religion = catholic }
					owner = { religion = sunni }
				}
				owner = { num_of_cities = 25 }
				NOT = { exists = CAS }
				NOT = { exists = SPA }
			}
			AND = {
				region = low_countries_region
				OR = {
					owner = { primary_culture = flemish }
					owner = { primary_culture = dutch }
					owner = { primary_culture = wallonian }
					owner = { primary_culture = frisian } 
				}
				NOT = { province_id = 1931 }
			}
		}
		is_state = yes
		is_island = no
		OR = {
			development = 20
			is_capital = yes
			normal_or_historical_nations = no
		}
	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.2
	
	
	

	
	
	can_embrace = {
		owner = { has_institution = mercantilism_institution } #1356 #Not Gunpowder just in case it struggles to spread
	}


	
	embracement_speed = {
		modifier = {
			scale = yes
			factor = 0.6
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = {
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 0.3
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						renaissance = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 1
			potential = {
				region = italy_region
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_italian_capital
				is_capital = yes
				region = italy_region
				culture_group = latin
			}
			
			
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_10
				continent = europe
				development = 10
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20
				development = 20
				continent = europe
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_5_post_1500
				continent = europe
				is_year = 1500
				development = 5
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				OR = {
					area = flanders_area
					area = tuscany_area
					area = venetia_area
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_flanders_tuscany_venetia
				OR = {
					area = flanders_area
					area = tuscany_area
					area = venetia_area
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_renaissance
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = renaissance }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = renaissance
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_renaissance_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = renaissance
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}


#######################################
# New World
# 
# Colonising is good.. mkay.-.
#######################################
new_world_i = {
	penalty = 0.5

	bonus = {
		global_prov_trade_power_modifier = 0.10
	}

	trade_company_efficiency = 0.0


	historical_start_date = 1500.1.1
	historical_start_province = 224 #Sevilla

	history = {
		OR = {
			AND = {
				is_year = 1500
				continent = europe
				OR = {
					owner = { has_idea = quest_for_the_new_world }
					owner = { colony = 1 }
				}
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1600
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1600
				continent = europe
			}
			AND = {
				is_year = 1625
				superregion = persia_superregion
			}
			AND = {
				is_year = 1650
				superregion = india_superregion
			}
			
			
			AND = {
				is_year = 1650
				superregion = china_superregion
			}
			
			AND = {
				is_year = 1650
				superregion = east_indies_superregion
			}
			AND = {
				is_year = 1700
				superregion = africa_superregion
			}
			is_year = 1800
		}
	}
	
	can_start = {
		is_year = 1500
		OR = {
			continent = europe
			continent = asia
			continent = africa
		}
		has_port = yes
		is_island = no
		is_state = yes
		OR = {
			province_has_center_of_trade_of_level = 1
			development = 12
			is_capital = yes
		}
		is_in_capital_area = yes
		owner = { 
			has_idea = quest_for_the_new_world 
			OR = {
				north_america = { has_discovered = PREV }
				south_america = { has_discovered = PREV }
				new_world = { has_discovered = PREV }
			}
		}
	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.3
	
	
	

	
	
	can_embrace = {
		always = yes
	}


	
	embracement_speed = {
	
		modifier = {
			factor = 1.2
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = {
					new_world_i = 100
				}
			}
			
		}
		
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				has_port = yes
				NOT = {
					any_friendly_coast_border_province = {
						new_world_i = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_new_world
				has_port = yes
				any_neighbor_province = {
					new_world_i = 100
				}
			}
		}
		
		#Port provinces in countries with colonial subjects
		modifier = {
			factor = 10
			potential = {
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					capital_scope = {
						NOT = { continent = north_america }
						NOT = { continent = south_america }
						NOT = { continent = new_world }
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_colonial_subject_in_new_world
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					colony = 1
					any_subject_country = {
						is_colonial_nation = yes
						OR = {
							capital_scope = { continent = north_america }
							capital_scope = { continent = south_america }
							capital_scope = { continent = new_world }
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_new_world_i
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = new_world_i }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = new_world_i
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_new_world_i_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = new_world_i
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}



#######################################
# Printing Press
#######################################
printing_press = {
	penalty = 0.5

	bonus = {
		stability_cost_modifier = -0.05
	}

	trade_company_efficiency = 0.0

	historical_start_date = 1550.1.1
	historical_start_province = 1876 #Frankfurt

	history = {
		OR = {
			AND = {
				province_id = 1876
				is_year = 1550
			}
			AND = {
				is_year = 1560
				OR = {
					religion = protestant
					religion = reformed
					region = italy_region
					region = france_region
				}
			}
			AND = {
				is_year = 1575
				continent = europe
				development = 12
			}
			AND = {
				is_year = 1600
				continent = europe
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1625
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1650
				superregion = persia_superregion
			}
			AND = {
				is_year = 1725
				superregion = china_superregion
			}
			AND = {
				is_year = 1725
				superregion = india_superregion
			}
			AND = {
				is_year = 1725
				superregion = east_indies_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1550
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		OR = {
			development = 15
			is_capital = yes
			trade_goods = paper
		}
		OR = {
			religion = protestant
			religion = reformed
			region = north_german_region
			region = south_german_region
		}

	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.4
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = {
					printing_press = 100
				}
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						printing_press = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_church }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_clergy
				any_neighbor_province = {
					printing_press = 100
				}
				owner = {
					has_estate = estate_church
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
				has_estate = estate_church
			}
		}
		modifier = {
			factor = 1
			custom_trigger_tooltip = {
				tooltip = tooltip_dip_tech15_capital
				is_capital = yes
				owner = {
					dip_tech = 15
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20_capital
				development = 20
				is_capital = yes
				continent = europe
			}
		}
		modifier = {
			factor = 2
			potential = {
				owner = {
					religion_group = christian
				}
			}
			if = {
				limit = { has_dlc = "Rule Britannia" }
				custom_trigger_tooltip = {
					tooltip = tooltip_owner_protestant
					is_owned_by_trade_company = no
					owner = {
						OR = {
							religion = protestant
							religion = reformed
							religion = anglican
						}
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = tooltip_owner_protestant
					is_owned_by_trade_company = no
					owner = {
						OR = {
							religion = protestant
							religion = reformed
							religion = anglican
						}
					}
				}
			}
		}
		modifier = {
			factor = 1
			if = {
				limit = {
					has_dlc = "Rule Britannia"
				}
				custom_trigger_tooltip = {
					tooltip = tooltip_province_protestant_RB
					OR = {
						religion = reformed
						religion = protestant
						religion = anglican
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = tooltip_province_protestant
					OR = {
						religion = reformed
						religion = protestant
						religion = anglican
					}
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_printing_press
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = printing_press }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = printing_press
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = printing_press
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}





#######################################
# Global Trade
#######################################
global_trade = {
	penalty = 0.5

	bonus = {
		merchants = 1
	}

	trade_company_efficiency = 0.1

	historical_start_date = 1600.1.1
	historical_start_province = 97 #Holland

	history = {
		OR = {
			AND = {
				is_year = 1620
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1660
				continent = europe
			}	
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1700
				is_capital = no
				OR = {
					region = maghreb_region
					region = egypt_region
					superregion = near_east_superregion
				}
			}
			
			AND = {
				is_year = 1720
				has_port = yes
				is_capital = no
				OR = {
					superregion = india_superregion
					superregion = persia_superregion
					superregion = east_indies_superregion
				}
			}
			AND = {
				is_year = 1750
				has_port = yes
				is_capital = no
				superregion = africa_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1600
		is_island = no
		highest_value_trade_node = yes
		OR = {
			province_has_center_of_trade_of_level = 3
			province_has_center_of_trade_of_level = 2
			is_capital = yes
		}
		owner = {
			any_active_trade_node = {
				is_strongest_trade_power = PREV
				highest_value_trade_node = yes
			}
		}

	}
	start_chance = 25		#in 100 for when a province can_start
	
	
	on_start = institution_events.5
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.4 #Not scaled
			province_trade_power = 15
		}
		modifier = {
			factor = 0.8 #Not Scaled
			province_trade_power = 25
		}
		modifier = {
			factor = 1.2 #Not Scaled
			province_trade_power = 35
		}
		modifier = {
			factor = 1.6 #Not Scaled
			province_trade_power = 45
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				province_has_center_of_trade_of_level = 3
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_center_of_trade_spread
				province_has_center_of_trade_of_level = 3
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				OR = {
					province_has_center_of_trade_of_level = 1
					province_has_center_of_trade_of_level = 2
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_center_of_trade_spread
				province_has_center_of_trade_of_level = 2
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_burghers }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_burghers
				any_neighbor_province = {
					global_trade = 100
				}
				owner = {
					has_estate = estate_burghers
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
				has_estate = estate_burghers
			}
		}

		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				has_port = no
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				has_port = no
				any_neighbor_province = {
					global_trade = 100
					
				}
			}
		}
		
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				has_port = yes
				any_neighbor_province = {
					global_trade = 100
					
				}
			}
		}
		
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_global_trade
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = global_trade }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			printing_press = 100
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = global_trade
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = global_trade
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}


#######################################
# Manufactories
#######################################
manufactories = {
	penalty = 0.5

	bonus = {
		global_trade_goods_size_modifier = 0.1
	}

	trade_company_efficiency = 0.2

	historical_start_date = 1650.1.1
	historical_start_province = 183 #Paris

	history = {
		OR = {
			AND = {
				is_year = 1680
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1720
				continent = europe
			}	
			AND = {
				is_year = 1750
				superregion = china_superregion
			}
			AND = {
				is_year = 1750
				superregion = india_superregion
			}
			AND = {
				is_year = 1750
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1750
				region = maghreb_region
			}
			AND = {
				is_year = 1750
				region = egypt_region
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			
			AND = {
				is_year = 1780
				superregion = persia_superregion
			}
			
		}
	}
	
	can_start = {
		is_year = 1650
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		development = 20
		printing_press = 100
		global_trade = 100
		OR = {
			has_building = wharf
			has_building = weapons
			has_building = textile
			has_building = plantations
			has_building = tradecompany
			has_building = mills
		}
	}
	start_chance = 10		#in 100 for when a province can_start
	
	
	on_start = institution_events.6
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.35
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = {
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						manufactories = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_wharf_on_institution_continent
				has_building = wharf
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = copper
					trade_goods = iron
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_weapons_on_institution_continent
				has_building = weapons
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = wool
					trade_goods = cloth
					trade_goods = silk
					trade_goods = dyes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_textile_on_institution_continent
				has_building = textile
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = coffee
					trade_goods = cotton
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = tea
					trade_goods = cocoa
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_plantations_on_institution_continent
				has_building = plantations
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = ivory
					trade_goods = slaves
					trade_goods = spices
					trade_goods = fur
					trade_goods = incense
				}
			}
			has_building = tradecompany
			custom_trigger_tooltip = {
				tooltip = tooltip_tradecompany_on_institution_continent
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
					trade_goods = wine
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_farm_estate_on_institution_continent
				has_building = farm_estate
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = paper
					trade_goods = gems
					trade_goods = tropical_wood
					trade_goods = glass
					trade_goods = chinaware
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_mills_on_institution_continent
				has_building = mills
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_wharf_not_institution_continent
				has_building = wharf
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = copper
					trade_goods = iron
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_weapons_not_institution_continent
				has_building = weapons
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				OR = {
					trade_goods = wool
					trade_goods = cloth
					trade_goods = silk
					trade_goods = dyes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_textile_not_institution_continent
				has_building = textile
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = coffee
					trade_goods = cotton
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = tea
					trade_goods = cocoa
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_plantations_not_institution_continent
				has_building = plantations
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = ivory
					trade_goods = slaves
					trade_goods = spices
					trade_goods = fur
					trade_goods = incense
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tradecompany_not_institution_continent
				has_building = tradecompany
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
					trade_goods = wine
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_farm_estate_not_institution_continent
				has_building = farm_estate
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = paper
					trade_goods = gems
					trade_goods = tropical_wood
					trade_goods = glass
					trade_goods = chinaware
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_mills_not_institution_continent
				has_building = mills
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_manufactories
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = manufactories }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = manufactories
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_manufactories_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = manufactories
				}
			}
		}

	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}



#######################################
# Enlightenment
#######################################
enlightenment = {
	penalty = 0.5

	bonus = {
		culture_conversion_cost = -0.25
	}

	trade_company_efficiency = 0.3

	historical_start_date = 1700.1.1
	historical_start_province = 236 #London

	history = {
		OR = {
			AND = {
				is_year = 1700
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1730
				continent = europe
			}	

			AND = {
				is_year = 1800
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1700
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		printing_press = 100
		global_trade = 100
		development = 30
		OR = {
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament
				has_seat_in_parliament = yes
			}
			has_building = university
			AND = {
				continent = europe
				owner = {
					ADM = 5
					MIL = 5
					DIP = 5
				}
			}
			
		}
	}
	start_chance = 10		#in 100 for when a province can_start
	
	
	on_start = institution_events.7
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.1
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = {
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						enlightenment = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 5
			custom_trigger_tooltip = {
				tooltip = tooltip_university_on_institution_continent
				has_building = university
				any_province = {
					is_institution_origin = enlightenment
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			custom_trigger_tooltip = {
				tooltip = tooltip_university_not_institution_continent
				has_building = university
				any_province = {
					is_institution_origin = enlightenment
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 5
			potential = {
				owner = {
					has_parliament = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament_on_institution_continent
				has_seat_in_parliament = yes
				any_province = {
					is_institution_origin = enlightenment
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 0.5
			potential = {
				owner = {
					has_parliament = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament_not_institution_continent
				has_seat_in_parliament = yes
				any_province = {
				is_institution_origin = enlightenment
				NOT = { continent = PREV }
			}
			}
		}
		modifier = {
			factor = 1.5
			custom_trigger_tooltip = {
				tooltip = tooltip_philosopher_capital
				is_capital = yes
				owner = {
					advisor = philosopher
					dip_tech = 20
				}
			}
		}
		modifier = {
			factor = 3
			custom_trigger_tooltip = {
				tooltip = tooltip_scientist_capital
				is_capital = yes
				owner = {
					advisor = natural_scientist
					dip_tech = 20
				}
			}
		}
		modifier = {
			factor = 5
			custom_trigger_tooltip = {
				tooltip = tooltip_full_innovativeness
				is_capital = yes
				owner = {
					full_idea_group = innovativeness_ideas
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_enlightenment
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = enlightenment }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = enlightenment
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_enlightenment_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = enlightenment
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}
